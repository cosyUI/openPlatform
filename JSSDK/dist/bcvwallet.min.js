/*! bcvwallet v1.1.2 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.bcvWallet=t():e.bcvWallet=t()}(this,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=navigator.userAgent.toLowerCase(),a={};i.indexOf("Android")>-1||i.indexOf("Adr")>-1?a.platform="android":i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?a.platform="ios":a.platform="desktop";var r=i.match(/bitcvwallet\/(ios|android)\/(\d+\.\d+\.\d+)(\/lang\/(\w{1,}))?/);r?(a.isInBitcvApp=!0,a.appPlatform=r[1],a.appVersion=r[2],a.appLanguage=r[4]?r[4]:"cn"):a.isInBitcvApp=!1;var o={config:"",updateCfg:function(e){o.config=e}},d={ua:i,env:a,apiNameMap:{config:"config",requestPayment:"requestPayment",shareWechat:"shareWechat",openUrlScheme:"openUrlScheme"},bwCfg:o};t.default=d,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=n(0);var r=function(e){if(a.bwCfg.config&&a.bwCfg.config.debug){void 0==i&&((i=document.createElement("p")).setAttribute("id","bcvWalletLog"),i.setAttribute("style","word-break:break-all;background:#eee;z-index:9999;"),i.style.fontSize="14px",document.body.appendChild(i));var t=i.innerHTML+e+"----------";i.innerHTML=t}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),r=n(3);var o={_readyCBs:[]},d={state:0,res:{}},c={env:i.env,config:function(e){i.bwCfg.updateCfg(e),i.bwCfg.config&&i.bwCfg.config.debug&&(0,a.default)("币威 JSSDK log 区域: "),(0,r.setupWebViewJavascriptBridge)(function(t){t.init&&t.init(function(e,t){}),(0,r.invokeCmd)(i.apiNameMap.config,e,function(){o._complete=function(e){d.state=1};var e=o._readyCBs;return o.success=function(){for(var t=0,n=e.length;t<n;t++)e[t]();o._readyCBs=[]},o.fail=function(e){o._fail?o._fail(e):o.state=-1},o.complete=function(){},o}())})},ready:function(e){0!=d.state?((0,a.default)("ready"),e()):o._readyCBs.push(e)},error:function(e){-1==d.state?e(d.res):o._fail=e},requestPayment:function(e){(0,r.invokeCmd)(i.apiNameMap.requestPayment,e,e)},shareWechat:function(e){(0,r.invokeCmd)(i.apiNameMap.shareWechat,e,e)},openUrlScheme:function(e){(0,r.invokeCmd)(i.apiNameMap.openUrlScheme,e,e)}};t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(n(1));function r(e,t,n){switch((0,a.default)("接收到事件回调"),(0,a.default)(e+"回调数据："+JSON.stringify(t)),(n=n||{})._complete&&(n._complete(t),delete n._complete),t.errcode){case"0":case 0:n.success&&n.success(t);break;case"-1":case-1:n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function o(e){return e=e||{},(0,a.default)("调用数据："+JSON.stringify(e)),e.config={appId:i.bwCfg.config.appId,signType:"sha1",timestamp:i.bwCfg.config.timestamp+"",nonceStr:i.bwCfg.config.nonceStr,signature:i.bwCfg.config.signature},e}var d={setupWebViewJavascriptBridge:function(e){if(i.env.isInBitcvApp&&"android"===i.env.appPlatform){if(window.WebViewJavascriptBridge)return(0,a.default)("Android-has bridge"),e(window.WebViewJavascriptBridge);(0,a.default)("Android-no bridge and waiting for bridge ready"),document.addEventListener("WebViewJavascriptBridgeReady",function(){(0,a.default)("Android-bridge ready now"),e(window.WebViewJavascriptBridge)},!1)}else if(i.env.isInBitcvApp&&"ios"===i.env.appPlatform){if(window.WebViewJavascriptBridge)return(0,a.default)("iOS-has bridge"),e(WebViewJavascriptBridge);if((0,a.default)("iOS-no bridge and waiting for WVJBCallbacks"),window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}else(0,a.default)("非bcvWallet环境，无法使用SDK相关功能"),console.warn("非bcvWallet环境，无法使用SDK相关功能")},invokeCmd:function(e,t,n){(0,a.default)("开始调用事件"),window.WebViewJavascriptBridge?window.WebViewJavascriptBridge.callHandler(e,o(t),function(t){r(e,t,n)}):(console.warn("调用失败，尚未完成config初始化"),(0,a.default)("调用失败，尚未完成config初始化"),r(e,{errcode:1,errmsg:"SDK尚未 config 完成",data:{}},n))},completeBridgeInteraction:r,formatParm:o};t.default=d,e.exports=t.default}])});