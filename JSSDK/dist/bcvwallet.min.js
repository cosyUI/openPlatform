/*! bcvwallet v2.0.0 */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.bcvWallet=n():e.bcvWallet=n()}(this,function(){return function(e){var n={};function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(a,i,function(n){return e[n]}.bind(null,i));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=navigator.userAgent.toLowerCase(),i={};a.indexOf("Android")>-1||a.indexOf("Adr")>-1?i.platform="android":a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?i.platform="ios":i.platform="desktop";var o=a.match(/bitcvwallet\/(ios|android)\/(\d+\.\d+\.\d+)(\/lang\/(\w{1,}))?/);o?(i.isInBitcvApp=!0,i.appPlatform=o[1],i.appVersion=o[2],i.appLanguage=o[4]?o[4]:"cn"):i.isInBitcvApp=!1;var c=function(){this.config={},this.status=0,this._success=null,this._fail=null,this._failRes={}};c.prototype.update=function(e,n){this[e]=n};var r={ua:a,env:i,apiNameMap:{config:"config",requestPayment:"requestPayment",shareWechat:"shareWechat",openUrlScheme:"openUrlScheme",download:"download",scanQRCode:"scanQRCode",mediaShare:"mediaShare",pageInit:"pageInit",navbarItemCallback:"navbarItemCallback"},configInfo:new c};n.default=r,e.exports=n.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=t(0);var o=function(e){if(i.configInfo.config&&i.configInfo.config.debug){a||((a=document.createElement("div")).setAttribute("id","bcvWalletLogs"),document.body.appendChild(a));var n=document.createElement("p");n.setAttribute("id","bcvWalletLog"),n.setAttribute("style","word-break:break-all;background:#eee;z-index:9999;"),n.style.fontSize="14px",n.innerHTML="- "+e,a.appendChild(n)}};n.default=o,e.exports=n.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(t(1)),o=t(3);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var r={env:a.env,config:function(e){a.configInfo.update("config",e),(0,i.default)("币威 JSSDK log 区域: "),(0,o.setupWebViewJavascriptBridge)(function(n){n.init&&n.init(function(){}),(0,o.callCmd)(a.apiNameMap.config,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(n){c(e,n,t[n])})}return e}({},e,{success:function(){a.configInfo.update("status",1),a.configInfo._success&&a.configInfo._success()},fail:function(e){a.configInfo.update("status",-1),a.configInfo.update("_failRes",e),a.configInfo._fail&&a.configInfo._fail(e)}}))})},ready:function(e){1==a.configInfo.status?((0,i.default)("config ready"),e()):a.configInfo.update("_success",e)},error:function(e){-1==a.configInfo.status?((0,i.default)("config error"),e(a.configInfo._failRes)):a.configInfo.update("_fail",e)},requestPayment:function(e){(0,o.checkConfigAndExecute)(a.apiNameMap.requestPayment,e,function(){(0,o.callCmd)(a.apiNameMap.requestPayment,e)})},shareWechat:function(e){(0,o.checkConfigAndExecute)(a.apiNameMap.shareWechat,e,function(){(0,o.callCmd)(a.apiNameMap.shareWechat,e)})},openUrlScheme:function(e){(0,o.checkConfigAndExecute)(a.apiNameMap.openUrlScheme,e,function(){(0,o.callCmd)(a.apiNameMap.openUrlScheme,e)})},download:function(e){(0,o.checkConfigAndExecute)(a.apiNameMap.download,e,function(){(0,o.callCmd)(a.apiNameMap.download,e)})},scanQRCode:function(e){(0,o.checkConfigAndExecute)(a.apiNameMap.scanQRCode,e,function(){(0,o.callCmd)(a.apiNameMap.scanQRCode,e)})},mediaShare:function(e){(0,o.checkConfigAndExecute)(a.apiNameMap.mediaShare,e,function(){(0,o.callCmd)(a.apiNameMap.mediaShare,e)})},pageInit:function(e){(0,o.checkConfigAndExecute)(a.apiNameMap.pageInit,e,function(){"none"!==e.navbarItemType&&(0,o.registerCmd)(a.apiNameMap.navbarItemCallback,e.navbarItemCallback),(0,o.callCmd)(a.apiNameMap.pageInit,e)})}};n.default=r,e.exports=n.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(t(1));function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch((0,i.default)("接收到".concat(e,"事件回调")),(0,i.default)("回调数据："+JSON.stringify(n)),n.errcode){case"0":case 0:t.success&&t.success(n);break;case"-1":case-1:t.cancel&&t.cancel(n);break;default:t.fail&&t.fail(n)}t.complete&&t.complete(n)}var c={setupWebViewJavascriptBridge:function(e){if(a.env.isInBitcvApp&&"android"===a.env.appPlatform){if(window.WebViewJavascriptBridge)return(0,i.default)("Android - has bridge"),e(window.WebViewJavascriptBridge);(0,i.default)("Android - no bridge and waiting for bridge ready"),document.addEventListener("WebViewJavascriptBridgeReady",function(){(0,i.default)("Android - bridge ready now"),e(window.WebViewJavascriptBridge)},!1)}else if(a.env.isInBitcvApp&&"ios"===a.env.appPlatform){if(window.WebViewJavascriptBridge)return(0,i.default)("iOS - has bridge"),e(WebViewJavascriptBridge);if((0,i.default)("iOS - no bridge and waiting for WVJBCallbacks"),window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var n=document.createElement("iframe");n.style.display="none",n.src="https://__bridge_loaded__",document.documentElement.appendChild(n),setTimeout(function(){document.documentElement.removeChild(n)},0)}else(0,i.default)("非bcvWallet环境，无法使用SDK相关功能"),console.warn("非bcvWallet环境，无法使用SDK相关功能")},checkConfigAndExecute:function(e,n,t){console.log(a.configInfo.config),console.log(a.configInfo.status),1===a.configInfo.status?t():((0,i.default)("".concat(e,"执行失败，尚未完成config初始化")),console.error("".concat(e,"执行失败，尚未完成config初始化")),o(e,{errcode:1,errmsg:"SDK尚未 config 完成",data:{}},n))},callCmd:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)("开始调用事件".concat(e)),(0,i.default)("调用数据："+JSON.stringify(n)),window.WebViewJavascriptBridge.callHandler(e,function(e){return e.config={appId:a.configInfo.config.appId,signType:"sha1",timestamp:a.configInfo.config.timestamp+"",nonceStr:a.configInfo.config.nonceStr,signature:a.configInfo.config.signature},e}(n),function(t){o(e,t,n)})},registerCmd:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};(0,i.default)("开始注册事件".concat(e)),window.WebViewJavascriptBridge.registerHandler(e,n)}};n.default=c,e.exports=n.default}])});